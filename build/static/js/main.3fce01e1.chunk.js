(this["webpackJsonpinsta-clone"]=this["webpackJsonpinsta-clone"]||[]).push([[0],{54:function(e,t,n){},55:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),s=n(18),o=n.n(s),i=(n(54),n(16)),r=(n(55),n(98)),l=n(23),u=l.a.initializeApp({apiKey:"AIzaSyB4zDSS1hvlWHhm-1WhEuB3VbjyJ4LEuUg",authDomain:"instagram-clone-dc6e3.firebaseapp.com",projectId:"instagram-clone-dc6e3",storageBucket:"instagram-clone-dc6e3.appspot.com",messagingSenderId:"13251640212",appId:"1:13251640212:web:5458f7e0d07dd4a2a46d81",measurementId:"G-M6N103RKJW"}).firestore(),d=l.a.auth(),p=l.a.storage(),j=n(5);var m=function(e){var t=e.postId,n=e.username,c=e.caption,s=e.imageUrl,o=e.user,d=Object(a.useState)([]),p=Object(i.a)(d,2),m=p[0],b=p[1],h=Object(a.useState)(""),f=Object(i.a)(h,2),g=f[0],O=f[1];return Object(a.useEffect)((function(){var e;return t&&(e=u.collection("posts").doc(t).collection("comments").orderBy("timestamp","desc").onSnapshot((function(e){b(e.docs.map((function(e){return{id:e.id,comment:e.data()}})))}))),function(){e()}}),[t]),Object(j.jsxs)("div",{className:"post",children:[Object(j.jsxs)("div",{className:"post__header",children:[Object(j.jsxs)("div",{className:"post__headerUser",children:[Object(j.jsx)(r.a,{className:"post__avatar",alt:"RafehQazi",src:"/static/images/avatar/1.jpg"}),Object(j.jsx)("h3",{children:n})]}),n===(null===o||void 0===o?void 0:o.displayName)?Object(j.jsx)("button",{className:"post__deletePost",onClick:function(){u.collection("posts").doc(t).delete()},children:"x"}):Object(j.jsx)("div",{})]}),Object(j.jsx)("img",{className:"post__image",src:s,alt:""}),Object(j.jsxs)("h4",{className:"post__text",children:[Object(j.jsx)("strong",{children:n})," ",c]}),Object(j.jsx)("div",{className:"post__comments",children:m.map((function(e){var n=e.id,a=e.comment;return Object(j.jsxs)("div",{className:"post__comment",children:[a.username===(null===o||void 0===o?void 0:o.displayName)?Object(j.jsx)("button",{className:"post__deleteComment",onClick:function(){return function(e){u.collection("posts").doc(t).collection("comments").doc(e).delete()}(n)},children:"X"}):Object(j.jsx)("div",{}),Object(j.jsxs)("p",{children:[Object(j.jsx)("strong",{children:a.username})," ",a.text]})]})}))}),o&&Object(j.jsxs)("form",{className:"post__commentBox",children:[Object(j.jsx)("input",{type:"text",className:"post__input",placeholder:"Add a comment...",value:g,onChange:function(e){return O(e.target.value)}}),Object(j.jsx)("button",{className:"post__button",disabled:!g,type:"submit",onClick:function(e){e.preventDefault(),u.collection("posts").doc(t).collection("comments").add({text:g,username:o.displayName,timestamp:l.a.firestore.FieldValue.serverTimestamp()}),O("")},children:"Post"})]})]})},b=n(95),h=(n(66),n(94)),f=n(97),g=n(96);n(67);var O=function(e){var t=e.username,n=Object(a.useState)(null),c=Object(i.a)(n,2),s=c[0],o=c[1],r=Object(a.useState)(0),d=Object(i.a)(r,2),m=d[0],b=d[1],h=Object(a.useState)(""),f=Object(i.a)(h,2),O=f[0],x=f[1];return Object(j.jsxs)("div",{className:"imageupload",children:[Object(j.jsx)("progress",{className:"imageupload__progress",value:m,max:"100"}),Object(j.jsx)("input",{type:"text",placeholder:"Enter a caption...",value:O,onChange:function(e){return x(e.target.value)}}),Object(j.jsx)("input",{type:"file",onChange:function(e){e.target.files[0]&&o(e.target.files[0])}}),s?Object(j.jsx)(g.a,{onClick:function(){p.ref("images/".concat(s.name)).put(s).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);b(t)}),(function(e){console.log(e)}),(function(){p.ref("images").child(s.name).getDownloadURL().then((function(e){u.collection("posts").add({timestamp:l.a.firestore.FieldValue.serverTimestamp(),caption:O,imageUrl:e,username:t}),b(0),x(""),o(null)}))}))},children:"Upload"}):Object(j.jsx)("p",{children:"Please select an image"})]})},x=n(46);function v(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%) ")}}var _=Object(h.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));var N=function(){var e=_(),t=Object(a.useState)(v),n=Object(i.a)(t,1)[0],c=Object(a.useState)([]),s=Object(i.a)(c,2),o=s[0],r=s[1],l=Object(a.useState)(!1),p=Object(i.a)(l,2),h=p[0],N=p[1],y=Object(a.useState)(!1),C=Object(i.a)(y,2),S=C[0],w=C[1],U=Object(a.useState)(""),I=Object(i.a)(U,2),T=I[0],k=I[1],B=Object(a.useState)(""),E=Object(i.a)(B,2),L=E[0],z=E[1],D=Object(a.useState)(""),R=Object(i.a)(D,2),X=R[0],P=R[1],A=Object(a.useState)(null),F=Object(i.a)(A,2),J=F[0],Q=F[1];return Object(a.useEffect)((function(){var e=d.onAuthStateChanged((function(e){e?(console.log(e),Q(e)):Q(null)}));return function(){e()}}),[J,T]),Object(a.useEffect)((function(){u.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){r(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[]),Object(j.jsxs)("div",{className:"app",children:[Object(j.jsx)(b.a,{open:h,onClose:function(){return N(!1)},children:Object(j.jsx)("div",{style:n,className:e.paper,children:Object(j.jsxs)("form",{className:"app__signup",children:[Object(j.jsx)("center",{children:Object(j.jsx)("img",{className:"app__headerImage",src:"https://lh3.googleusercontent.com/2sREY-8UpjmaLDCTztldQf6u2RGUtuyf6VT5iyX3z53JS4TdvfQlX-rNChXKgpBYMw",height:"40px",alt:""})}),Object(j.jsx)(f.a,{placeholder:"username",type:"text",value:T,onChange:function(e){return k(e.target.value)}}),Object(j.jsx)(f.a,{placeholder:"email",type:"text",value:L,onChange:function(e){return z(e.target.value)}}),Object(j.jsx)(f.a,{placeholder:"password",type:"password",value:X,onChange:function(e){return P(e.target.value)}}),Object(j.jsx)(g.a,{type:"submit",onClick:function(e){e.preventDefault(),d.createUserWithEmailAndPassword(L,X).then((function(e){return e.user.updateProfile({displayName:T})})).catch((function(e){return alert(e.message)})),N(!1)},children:"Sign Up"})]})})}),Object(j.jsx)(b.a,{open:S,onClose:function(){return w(!1)},children:Object(j.jsx)("div",{style:n,className:e.paper,children:Object(j.jsxs)("form",{className:"app__signup",children:[Object(j.jsx)("center",{children:Object(j.jsx)("img",{className:"app__headerImage",src:"https://lh3.googleusercontent.com/2sREY-8UpjmaLDCTztldQf6u2RGUtuyf6VT5iyX3z53JS4TdvfQlX-rNChXKgpBYMw",height:"40px",alt:""})}),Object(j.jsx)(f.a,{placeholder:"email",type:"text",value:L,onChange:function(e){return z(e.target.value)}}),Object(j.jsx)(f.a,{placeholder:"password",type:"password",value:X,onChange:function(e){return P(e.target.value)}}),Object(j.jsx)(g.a,{type:"submit",onClick:function(e){e.preventDefault(),d.signInWithEmailAndPassword(L,X).catch((function(e){return alert(e.message)})),w(!1)},children:"Sign In"})]})})}),Object(j.jsxs)("div",{className:"app__header",children:[Object(j.jsx)("img",{className:"app__headerImage",src:"https://lh3.googleusercontent.com/2sREY-8UpjmaLDCTztldQf6u2RGUtuyf6VT5iyX3z53JS4TdvfQlX-rNChXKgpBYMw",height:"40px",alt:""}),J?Object(j.jsx)("div",{className:"app__logoutContainer",children:Object(j.jsx)(g.a,{onClick:function(){return d.signOut()},children:"Logout"})}):Object(j.jsxs)("div",{className:"app__loginContainer",children:[Object(j.jsx)(g.a,{onClick:function(){return N(!0)},children:"Sign Up"}),Object(j.jsx)(g.a,{onClick:function(){return w(!0)},children:"Sign In"})]})]}),Object(j.jsxs)("div",{className:"app__posts",children:[Object(j.jsx)("div",{className:"app__postsLeft",children:o.map((function(e){var t=e.id,n=e.post;return Object(j.jsx)(m,{username:n.username,caption:n.caption,imageUrl:n.imageUrl,postId:t,user:J},t)}))}),Object(j.jsx)("div",{className:"app__postsLeft",children:Object(j.jsx)(x.a,{url:"https://www.instagram/p/B_uf9dmAGPw/",maxWidth:320,hideCaption:!1,containerTagName:"div",protocol:"",injectScript:!0,onLoading:function(){},onSuccess:function(){},onAfterRender:function(){},onFailure:function(){}})})]}),(null===J||void 0===J?void 0:J.displayName)?Object(j.jsx)(O,{username:J.displayName}):Object(j.jsx)("h3",{children:"Sorry you need to login to upload"})]})},y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,100)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),s(e),o(e)}))};o.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(N,{})}),document.getElementById("root")),y()}},[[70,1,2]]]);
//# sourceMappingURL=main.3fce01e1.chunk.js.map